services:
  rsswithai-all-in-one:
    build: .
    container_name: rsswithai-server
    environment:
      # Database Configuration
      - DB_USERNAME=${DB_USERNAME}
      - DB_PASSWORD=${DB_PASSWORD}
      - SPRING_DATASOURCE_URL=${SPRING_DATASOURCE_URL}
      
      # Security (JWT)
      - JWT_SECRET=${JWT_SECRET}
      
      # Timezone
      - TZ=Asia/Shanghai
    
    ports:
      - "9090:8080"  # 后端 API (Tauri 或外部调用, 内部8080暴露为9090)
      - "5777:5777"  # 用户端 Web (映射到容器内 5777)
      - "5173:5173"  # 管理端 Web (映射到容器内 5173)

    restart: always
